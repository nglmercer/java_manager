import{pluginsapi as d,filemanagerapi as f}from"./fetchapi.CXYT3pXQ.js";import"./custom-modal.Dpdsc3Kx.js";import{e as m}from"./Emitter.BIRpGEY5.js";import"./PluginsUI.CCgHNbX9.js";import"./lit-element.CdPzzhzS.js";import"./lit-html.Cs9YtZST.js";import"./directive.CGE4aKEl.js";import"./custom-element.BhZVzxrc.js";import"./property.a2FlD-39.js";import"./state.Dj2gG79p.js";import"./map.DiiNQ3pp.js";const c=document.getElementById("modList"),u=document.getElementById("pluginList");let r="/"+window.selectedServer;document.addEventListener("DOMContentLoaded",async function(){E(),g(),c.type="mods",u.type="plugins",u.elements=["plugin1.jar","plugin2.jar.dis"],c.elements=["mod1.jar","mod2.jar.dis"]});const w=(e,t)=>`/${e}/${t}`;async function E(){["uploadItem_mod","uploadItem_plugin"].forEach(o=>{const s=document.getElementById(o);s&&s.addEventListener("click",async n=>{console.log("EventName",o),o==="uploadItem_mod"?r=window.selectedServer+"/mods":o==="uploadItem_plugin"&&(r=window.selectedServer+"/plugins"),m.emit("path-navigator:update-path",{path:r}),m.emit("path-navigator:current-path",{path:r});const l=document.getElementById("upload-files");l.show(),console.log("uploadFiles",l)})});const t=["toggle","delete"],i=o=>o?"enable":"disable";t.forEach(o=>{c.addEventListener(o,async s=>{const n=s.detail;if(o==="delete"){p(n,"mods");return}const l=await d.ModToggle(window.selectedServer,n.item,i(n.state));console.log("details",n,l)}),u.addEventListener(o,async s=>{const n=s.detail;if(o==="delete"){p(n,"plugins");return}console.log("details",n);const l=await d.pluginToggle(window.selectedServer,n.item,i(n.state));console.log("result",l)})})}async function p(e,t){const i=w(t,e.item);console.log("filePath",i,e);const o=await f.deleteFile(window.selectedServer,i);console.log("result",o),g()}async function g(){const e=await d.getPlugins(window.selectedServer),t=await d.getMods(window.selectedServer);!e||!t||(u.elements=a(e.data||[]),c.elements=a(t.data||[]),console.log("plugins",e,a(e.data||[])),console.log("mods",t,a(t.data||[])))}function a(e){if(!e||!Array.isArray(e))return[];const t=[];return e.forEach(i=>{t.push(i.filename||i.name)}),t}
