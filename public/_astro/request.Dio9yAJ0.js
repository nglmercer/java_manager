class n{constructor(s=1e3){this.queue=[],this.processing=!1,this.lastRequestTime=0,this.minTimeBetweenRequests=s}enqueue(s){this.queue.push(s),this.processing||this.processQueue()}async processQueue(){if(this.queue.length===0){this.processing=!1;return}this.processing=!0;const s=Date.now(),i=Math.max(0,this.lastRequestTime+this.minTimeBetweenRequests-s);i>0&&await new Promise(e=>setTimeout(e,i));try{const e=this.queue.shift();e&&(this.lastRequestTime=Date.now(),await e())}catch(e){console.error("Error al procesar solicitud en la cola:",e)}this.processQueue()}clear(){this.queue=[]}get pendingCount(){return this.queue.length}}const o=new n(1e3);let u=!1;function r(t){u||(u=!0,setTimeout(()=>{o.enqueue(async()=>{t&&t(),u=!1})},300))}export{r as s};
