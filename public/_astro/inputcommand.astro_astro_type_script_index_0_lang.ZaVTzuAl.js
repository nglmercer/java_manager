import{G as c}from"./Console.CV6ZOeDq.js";import{servermanagerapi as s}from"./fetchapi.CXYT3pXQ.js";import{s as d}from"./request.Dio9yAJ0.js";import{w as l}from"./socketManager.CWZJZG80.js";import"./lit-element.CdPzzhzS.js";import"./lit-html.Cs9YtZST.js";import"./custom-element.BhZVzxrc.js";l.connect({onOpen:e=>{console.log("Conexión WS establecida desde el componente.",e)},onMessage:(e,o)=>{const n=e;console.log("Mensaje recibido desde el componente:",n),!(!n||!n.event)&&n.event.startsWith("server")&&d(async()=>{try{await a(),window.getServerInfo&&window.getServerInfo(window.selectedServer)}catch(i){console.error("Error al actualizar información del servidor:",i)}})},onClose:e=>{console.log("Conexión WS cerrada desde el componente:",e)}});const r=window.commandWrapper,t=document.querySelector("game-console");r&&t&&r.addEventListener("command",function(e){t instanceof c?(console.log("detail",e.detail),w(e.detail.command)):console.error("commandContainer is not a GameConsole instance")});a();async function a(){if(m()){const e=await s.getServerLog(window.selectedServer);if(e.data){const o=Array.isArray(e.data)?e.data.join(`
`):typeof e.data=="string"?e.data:e.message;t.refreshlogs(o)}}}function m(){return window.selectedServer&&window.serverStatus!=="stopped"&&window.serverStatus!=="STOPPED"}async function w(e){const o=await s.sendCommand(window.selectedServer,e);console.log("result",o)}
