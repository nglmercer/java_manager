import"./serveritem.D8ldE6GI.js";import{s as i,o as s}from"./dropdown.4676YYwp.js";import{backupsapi as c}from"./fetchapi.CXYT3pXQ.js";import{g as a}from"./RecentBackups.astro_astro_type_script_index_0_lang.0yLp6_Cj.js";import"./lit-element.CdPzzhzS.js";import"./lit-html.Cs9YtZST.js";import"./custom-element.BhZVzxrc.js";import"./property.a2FlD-39.js";import"./directive.CGE4aKEl.js";import"./directive-helpers.CY_bUdrT.js";const l=document.getElementById("serverOptions");function p(){const e=document.querySelectorAll("server-item");console.log("allServerItems",e),e&&e.forEach(n=>{n.addEventListener("selected",function(t){"detail"in t&&t instanceof CustomEvent&&(window.location.href=`/console/?server=${t.detail.data.server}`)}),n.addEventListener("menu",function(t){if(!("detail"in t))return;const o=t.detail;console.log("menu",o);const r=u(o);i(l,r,o.event)})})}function u({data:e}){return[{html:s({id:"create-backup",icon:"backup",text:"Create Backup"}),callback:function(){console.log("Option 1 clicked",e);const t={folderName:e.server,serverName:e.server,outputFilename:e.server+"-backup-"+new Date().toISOString().slice(0,19).replace(/:/g,"-")};c.createBackups(t).then(o=>{console.log("Backup created successfully",o),a()}).catch(o=>{console.error("Error creating backup",o)})}}]}document.addEventListener("DOMContentLoaded",function(){setTimeout(()=>{p(),console.log("initEDlisteners")},1e3)});
