import{A as i}from"./barstatus.CzxN21Ca.js";import{servermanagerapi as o,serverapi as d}from"./fetchapi.CXYT3pXQ.js";import{s as l}from"./request.Dio9yAJ0.js";import{w as u}from"./socketManager.CWZJZG80.js";import"./lit-element.CdPzzhzS.js";import"./lit-html.Cs9YtZST.js";import"./custom-element.BhZVzxrc.js";import"./property.a2FlD-39.js";u.connect({onOpen:e=>{console.log("Conexión WS establecida desde el componente.",e)},onMessage:(e,r)=>{console.log("Mensaje recibido desde el componente:",e),!(!e||!e.event)&&e.event.startsWith("server")&&l(()=>{try{s(window.selectedServer)}catch(t){console.error("Error al actualizar información del servidor:",t)}})},onClose:e=>{console.log("Conexión WS cerrada desde el componente:",e)}});document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("serverActions");if(!e||!(e instanceof i))return;const r=[{id:"start-server",label:n("START"),icon:"play_arrow",action:"start-server"},{id:"stop-server",label:n("STOP"),icon:"stop",action:"stop-server"},{id:"restart-server",label:n("RESTART"),icon:"restart_alt",iconOnly:!0,action:"restart-server"},{id:"more-server-actions",label:n("MORE"),icon:"more_horiz",iconOnly:!0,action:"more-server-actions"},{id:"kill-server",label:"Force Quit",icon:"dangerous",iconOnly:!0,action:"kill-server"}];r.forEach(t=>{e.addButton(t)}),v(e),e.addEventListener("button-clicked",t=>{if(!("detail"in t)||!(t instanceof CustomEvent))return;const a=r.find(c=>c.id===t.detail.id);switch(t.detail.id){case r[0].id:o.sendCommandToServer(window.selectedServer,"start"),console.log("Start server");break;case r[1].id:o.sendCommandToServer(window.selectedServer,"stop"),console.log("Stop server");break;case r[2].id:o.sendCommandToServer(window.selectedServer,"restart"),console.log("Restart server");break;case r[3].id:console.log("More server actions");break;case r[4].id:o.sendCommandToServer(window.selectedServer,"kill"),console.log("Kill server");break;default:console.log("Button clicked:",t.detail,a);break}})});async function s(e){const r=await d.getServerInfo(e);if(!r)return;const t=typeof r.data=="string"?r.data:r.data?.status;m(t)}window.getServerInfo=s;function v(e){e.hideButton("more-server-actions"),e.hideButton("kill-server"),e.hideButton("restart-server"),e.hideButton("stop-server")}const S={STARTING:"Iniciando",STOPPING:"Deteniendo",RUNNING:"En ejecución",STOPPED:"Detenido",START:"Iniciar",STOP:"Detener",RESTART:"Reiniciar",MORE:"Más"};function n(e){return S[e]||e}function m(e="STOPPED"){const r=document.getElementById("serverActions");if(!r||!(r instanceof i))return;r.hideAllButtons();const t=e.toUpperCase()||"";switch(f(e),t){case"STARTING":case"STOPPING":r.showButton("more-server-actions");break;case"RUNNING":r.showButton("restart-server"),r.showButton("stop-server"),r.showButton("more-server-actions");break;case"STOPPED":r.showButton("start-server");break}return!0}function f(e){window.dispatchEvent(new CustomEvent("change-status",{detail:{status:e}})),window.serverStatus=e}s(window.selectedServer);
