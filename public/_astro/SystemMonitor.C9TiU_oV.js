import{systemapi as H}from"./fetchapi.CXYT3pXQ.js";import{_ as j}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{d as Y,c as n,e as b,t as r,a as t,k as c,b as I,n as A,F as u,r as v,f as L,g as h,I as Z,o as K,h as q,i as l}from"./runtime-core.esm-bundler.D2uX_WMQ.js";const J=Y({__name:"SystemMonitor",setup(D,{expose:_}){_();function B(o,s=!1,d=1){if(o==null)return"N/A";if(o===0)return"0 Bytes";const g=s?1e3:1024;if(Math.abs(o)<g)return o+" B";const f=s?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let y=-1;const T=10**d;let M=o;do M/=g,++y;while(Math.round(Math.abs(M)*T)/T>=g&&y<f.length-1);return M.toFixed(d)+" "+f[y]}function e(o){if(o==null)return"N/A";if(o===0)return"0 seconds";const s=Math.floor(o/(3600*24)),d=Math.floor(o%(3600*24)/3600),g=Math.floor(o%3600/60),f=Math.floor(o%60),y=[];return s>0&&y.push(s+(s===1?" day":" days")),d>0&&y.push(d+(d===1?" hour":" hours")),g>0&&y.push(g+(g===1?" minute":" minutes")),(f>0||y.length===0)&&y.push(f+(f===1?" second":" seconds")),y.join(", ")}const C={osSectionTitle:"System Information",osName:"Operating System",osBuild:"OS Build",totalRam:"Total RAM",Uptime:"System Uptime",cpuModel:"CPU Model",cpuCores:"CPU Cores",cpuSpeed:"CPU Speed",environmentSectionTitle:"Environment Variables",networkInterfacesSectionTitle:"Network Interfaces",disksSectionTitle:"Disk Usage",diskUnit:"Unit",diskUsed:"Used",diskFree:"Free",diskTotal:"Total",diskPercent:"Usage %",noData:"No system data available.",loadingData:"Loading system data...",errorData:"Error loading system data.",battery:"Battery",batteryCharging:"Charging",batteryNotCharging:"Not Charging",batteryCycles:"Cycles",batteryPercentage:"Battery Percentage",batteryStatus:"Battery Status",gpuModel:"GPU Model",gpuVendor:"GPU Vendor",gpuVRAM:"GPU VRAM",graphicsSectionTitle:"Graphics"},w=L(null),a=L("N/A");let i;const p=L(!1),k=o=>o?{uptime:o.uptime,platform:o.platform||{name:"Unknown",release:"Unknown",arch:"Unknown",version:"Unknown"},totalmem:o.memory?.total?o.memory.total/(1024*1024):void 0,cpu:o.cpu||{model:"Unknown",cores:void 0,speed:void 0},battery:o.battery,disks:o.disks,rawdisks:o.rawdisks,environment:o.environment||{},graphics:o.graphics,networkInterfaces:o.networkInterfaces||{}}:null,S=h(()=>{const o=w.value;return o?{success:o.success,data:k(o.data)}:null}),m=h(()=>S.value?.data),P=h(()=>m.value?.platform||{}),z=h(()=>m.value?.cpu||{}),V=h(()=>m.value?.battery),F=h(()=>m.value?.graphics),E=h(()=>m.value?.environment||{}),O=h(()=>m.value?.networkInterfaces||{}),R=h(()=>{const o=m.value;return o?o.rawdisks&&o.rawdisks.length>0?o.rawdisks.map(s=>({...s,mountPoint:s.mount||s.fs,total:s.size})):o.disks&&o.disks.length>0?o.disks.map(s=>({...s,mountPoint:s.filesystem,available:s.total!==void 0&&s.used!==void 0?s.total-s.used:void 0,use:s.total&&s.used&&s.total>0?s.used/s.total*100:void 0})):[]:[]}),G=(o,s)=>{let d="bg-green-500";return typeof o!="number"||(o<=20?d="bg-red-500":o<=50&&(d="bg-orange-500"),s&&(d+=" bg-gradient-to-r from-green-400 to-green-600 animate-pulse")),d},U=async()=>{try{return await H.getSystemInfo()}catch(o){return console.error("Error fetching system info:",o),null}},x=()=>{p.value=window.matchMedia("(prefers-color-scheme: dark)").matches};Z(()=>m.value?.uptime,o=>{const s=o;console.log("initialUptimeSeconds",s);const d=Date.now();if(typeof s=="number"){const g=()=>{const f=Math.floor((Date.now()-d)/1e3);a.value=e(s+f)};g(),i!==void 0&&window.clearInterval(i),i=window.setInterval(g,1e3)}else a.value=e(void 0),i!==void 0&&(window.clearInterval(i),i=void 0)}),K(async()=>{w.value=await U(),x(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",x)}),q(()=>{i!==void 0&&window.clearInterval(i),window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",x)});const N={humanizeFileSize:B,humanizeSeconds:e,systemMonitorLabels:C,systemInfoData:w,currentUptimeText:a,get uptimeInterval(){return i},set uptimeInterval(o){i=o},isDark:p,mapApiDataToSystemData:k,initialData:S,data:m,platform:P,cpu:z,battery:V,graphics:F,environment:E,networkInterfaces:O,disksToDisplay:R,getBatteryBarClass:G,getSystemInfo:U,updateDarkMode:x};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}}),Q={class:"block font-sans break-words border rounded-lg p-4 transition-all duration-300 bg-gray-50 text-gray-800 border-gray-300 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600"},W={key:0,class:"p-6 text-center italic text-lg"},X={key:1,class:"p-6 text-center italic text-lg"},$={key:2},ee={class:"mt-5 mb-2.5 pb-1 text-lg font-semibold border-b border-gray-300 dark:border-gray-600 first:mt-0"},te={class:"space-y-2.5"},re={class:"leading-relaxed"},oe={class:"font-bold mr-1"},se={class:"text-xs align-super ml-0.5"},ae={class:"leading-relaxed"},ne={class:"font-bold mr-1"},le={class:"leading-relaxed"},ie={class:"font-bold mr-1"},de={class:"leading-relaxed"},ce={class:"font-bold mr-1"},be={class:"leading-relaxed"},ge={class:"font-bold mr-1"},ye={class:"leading-relaxed"},me={class:"font-bold mr-1"},he={class:"leading-relaxed"},_e={class:"font-bold mr-1"},fe={key:0},ue={class:"mt-5 mb-2.5 pb-1 text-lg font-semibold border-b border-gray-300 dark:border-gray-600"},pe={class:"space-y-2.5"},ke={class:"leading-relaxed"},ve={class:"font-bold mr-1"},we={class:"flex items-center gap-2"},xe={class:"w-6 h-6"},Me={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"w-full h-full"},Le=["fill"],Be=["height","fill"],Ce={class:"w-25 h-3 bg-gray-300 rounded border border-gray-400 overflow-hidden"},Se={key:0},Ue={class:"leading-relaxed"},Ne={class:"font-bold mr-1"},Te={key:0,class:"leading-relaxed"},Ie={class:"font-bold mr-1"},Ae={key:1},De={class:"mt-5 mb-2.5 pb-1 text-lg font-semibold border-b border-gray-300 dark:border-gray-600"},Pe={class:"leading-relaxed"},ze={class:"font-bold mr-1"},Ve={class:"leading-relaxed"},Fe={class:"font-bold mr-1"},Ee={key:0,class:"leading-relaxed"},Oe={class:"font-bold mr-1"},Re={key:2},Ge={class:"mt-5 mb-2.5 pb-1 text-lg font-semibold border-b border-gray-300 dark:border-gray-600"},He={class:"overflow-x-auto"},je={class:"w-full border-collapse mb-4 table-fixed border border-gray-300 dark:border-gray-600"},Ye={class:"p-2.5 border border-gray-300 dark:border-gray-600 text-left align-top bg-gray-200 dark:bg-gray-700"},Ze={class:"p-2.5 border border-gray-300 dark:border-gray-600 text-left align-top bg-gray-200 dark:bg-gray-700"},Ke={class:"p-2.5 border border-gray-300 dark:border-gray-600 text-left align-top bg-gray-200 dark:bg-gray-700"},qe={class:"p-2.5 border border-gray-300 dark:border-gray-600 text-left align-top bg-gray-200 dark:bg-gray-700"},Je={class:"p-2.5 border border-gray-300 dark:border-gray-600 text-left align-top bg-gray-200 dark:bg-gray-700"},Qe={class:"p-2.5 border border-gray-300 dark:border-gray-600 text-left align-top bg-gray-200 dark:bg-gray-700"},We={class:"p-2.5 border border-gray-300 dark:border-gray-600 text-left align-top break-all"},Xe={class:"p-2.5 border border-gray-300 dark:border-gray-600 text-left align-top break-all"},$e={class:"p-2.5 border border-gray-300 dark:border-gray-600 text-left align-top break-all"},et={class:"p-2.5 border border-gray-300 dark:border-gray-600 text-left align-top break-all"},tt={key:3},rt={class:"mt-5 mb-2.5 pb-1 text-lg font-semibold border-b border-gray-300 dark:border-gray-600"},ot={class:"overflow-x-auto"},st={class:"w-full border-collapse mb-4 table-fixed border border-gray-300 dark:border-gray-600"},at={class:"p-2.5 border border-gray-300 dark:border-gray-600 text-left align-top bg-gray-200 dark:bg-gray-700"},nt={class:"p-2.5 border border-gray-300 dark:border-gray-600 text-left align-top break-words"},lt={key:4},it={class:"mt-5 mb-2.5 pb-1 text-lg font-semibold border-b border-gray-300 dark:border-gray-600"},dt={class:"overflow-x-auto"},ct={class:"w-full border-collapse mb-4 table-fixed border border-gray-300 dark:border-gray-600"},bt={class:"p-2.5 border border-gray-300 dark:border-gray-600 text-left align-top bg-gray-200 dark:bg-gray-700"},gt={class:"p-2.5 border border-gray-300 dark:border-gray-600 text-left align-top break-words"},yt={class:"text-xs align-super ml-0.5"},mt={key:0};function ht(D,_,B,e,C,w){return l(),n("div",Q,[e.initialData?e.initialData&&(!e.initialData.success||!e.initialData.data)?(l(),n("div",X,r(e.initialData.success===!1?e.systemMonitorLabels.errorData:e.systemMonitorLabels.noData),1)):e.initialData&&e.initialData.success&&e.initialData.data?(l(),n("div",$,[t("section",null,[t("h3",ee,r(e.systemMonitorLabels.osSectionTitle),1),t("div",te,[t("p",re,[t("span",oe,r(e.systemMonitorLabels.osName)+":",1),c(" "+r(e.platform.name??"N/A")+" "+r(e.platform.version??"")+" ",1),t("sup",se,r(e.platform.arch??""),1)]),t("p",ae,[t("span",ne,r(e.systemMonitorLabels.osBuild)+":",1),c(" "+r(e.platform.release??"N/A"),1)]),t("p",le,[t("span",ie,r(e.systemMonitorLabels.totalRam)+":",1),c(" "+r(e.data?.totalmem?e.humanizeFileSize(e.data.totalmem*1024*1024):"N/A"),1)]),t("p",de,[t("span",ce,r(e.systemMonitorLabels.Uptime)+":",1),c(" "+r(e.currentUptimeText),1)]),t("p",be,[t("span",ge,r(e.systemMonitorLabels.cpuModel)+":",1),c(" "+r(e.cpu.model??"N/A"),1)]),t("p",ye,[t("span",me,r(e.systemMonitorLabels.cpuCores)+":",1),c(" "+r(e.cpu.cores??"N/A")+" cores ",1)]),t("p",he,[t("span",_e,r(e.systemMonitorLabels.cpuSpeed)+":",1),c(" "+r(e.cpu.speed?`${e.cpu.speed} GHz`:"N/A"),1)])])]),e.battery?.hasBattery?(l(),n("section",fe,[t("h3",ue,r(e.systemMonitorLabels.battery),1),t("div",pe,[t("p",ke,[t("span",ve,r(e.systemMonitorLabels.batteryPercentage)+":",1)]),t("div",we,[t("div",xe,[(l(),n("svg",Me,[t("path",{d:"M18 7H20C21.1046 7 22 7.89543 22 9V15C22 16.1046 21.1046 17 20 17H18V19C18 19.5523 17.5523 20 17 20H7C6.44772 20 6 19.5523 6 19V5C6 4.44772 6.44772 4 7 4H17C17.5523 4 18 4.44772 18 5V7ZM8 6V18H16V6H8Z",fill:e.isDark?"#e0e0e0":"#212529"},null,8,Le),(e.battery?.percent??0)>5?(l(),n("rect",{key:0,x:"9",y:"7",width:"6",height:Math.max(0,e.battery.percent/100*10),rx:"1",fill:e.isDark?"#e0e0e0":"#212529",style:I({transformOrigin:"bottom center",transform:`scaleY(1) translateY(calc(10px - ${Math.max(0,e.battery.percent/100*10)}px))`})},null,12,Be)):b("",!0)]))]),t("span",null,r(e.battery?.percent??"N/A")+"%",1),t("div",Ce,[t("div",{class:A([e.getBatteryBarClass(e.battery?.percent,e.battery?.isCharging),"h-full transition-all duration-500 ease-in-out rounded-l"]),style:I({width:`${e.battery?.percent??0}%`})},null,6)]),e.battery?.isCharging?(l(),n("span",Se,"("+r(e.systemMonitorLabels.batteryCharging)+")",1)):b("",!0)]),t("p",Ue,[t("span",Ne,r(e.systemMonitorLabels.batteryStatus)+":",1),c(" "+r(e.battery?.isCharging?e.systemMonitorLabels.batteryCharging:e.systemMonitorLabels.batteryNotCharging),1)]),typeof e.battery?.cycleCount=="number"&&e.battery.cycleCount>=0?(l(),n("p",Te,[t("span",Ie,r(e.systemMonitorLabels.batteryCycles)+":",1),c(" "+r(e.battery.cycleCount),1)])):b("",!0)])])):b("",!0),(e.graphics?.controllers?.length??0)>0?(l(),n("section",Ae,[t("h3",De,r(e.systemMonitorLabels.graphicsSectionTitle),1),(l(!0),n(u,null,v(e.graphics?.controllers,(a,i)=>(l(),n("div",{key:i,class:A([{"mb-2.5":!0,"pl-2.5":i>0},"space-y-2.5"])},[t("p",Pe,[t("span",ze,r(e.systemMonitorLabels.gpuModel)+":",1),c(" "+r(a.model??"N/A"),1)]),t("p",Ve,[t("span",Fe,r(e.systemMonitorLabels.gpuVendor)+":",1),c(" "+r(a.vendor??"N/A"),1)]),typeof a.vram=="number"?(l(),n("p",Ee,[t("span",Oe,r(e.systemMonitorLabels.gpuVRAM)+":",1),c(" "+r(a.vram)+" MB ",1)])):b("",!0)],2))),128))])):b("",!0),e.disksToDisplay.length>0?(l(),n("section",Re,[t("h3",Ge,r(e.systemMonitorLabels.disksSectionTitle),1),t("div",He,[t("table",je,[_[0]||(_[0]=t("colgroup",null,[t("col",{class:"w-1/4"}),t("col",{class:"w-3/16"}),t("col",{class:"w-3/16"}),t("col",{class:"w-3/16"}),t("col",{class:"w-3/16"})],-1)),t("thead",null,[t("tr",null,[t("th",Ye,r(e.systemMonitorLabels.diskUnit),1),t("th",Ze,r(e.systemMonitorLabels.diskUsed),1),t("th",Ke,r(e.systemMonitorLabels.diskFree),1),t("th",qe,r(e.systemMonitorLabels.diskTotal),1),t("th",Je,r(e.systemMonitorLabels.diskPercent),1)])]),t("tbody",null,[(l(!0),n(u,null,v(e.disksToDisplay,a=>(l(),n("tr",{key:a.mountPoint||a.fs||a.filesystem},[t("th",Qe,r(a.mountPoint??a.fs??a.filesystem??"N/A"),1),t("td",We,r(e.humanizeFileSize(a.used)),1),t("td",Xe,r(e.humanizeFileSize(a.available)),1),t("td",$e,r(e.humanizeFileSize(a.total??a.size)),1),t("td",et,r(typeof a.use=="number"?`${a.use.toFixed(1)}%`:a.use??"N/A"),1)]))),128))])])])])):b("",!0),Object.keys(e.environment).length>0?(l(),n("section",tt,[t("h3",rt,r(e.systemMonitorLabels.environmentSectionTitle),1),t("div",ot,[t("table",st,[_[1]||(_[1]=t("colgroup",null,[t("col",{class:"w-3/10"}),t("col",{class:"w-7/10"})],-1)),t("tbody",null,[(l(!0),n(u,null,v(Object.entries(e.environment),([a,i])=>(l(),n("tr",{key:a},[t("th",at,r(a),1),t("td",nt,r(i??"N/A"),1)]))),128))])])])])):b("",!0),Object.keys(e.networkInterfaces).length>0?(l(),n("section",lt,[t("h3",it,r(e.systemMonitorLabels.networkInterfacesSectionTitle),1),t("div",dt,[t("table",ct,[_[2]||(_[2]=t("colgroup",null,[t("col",{class:"w-3/10"}),t("col",{class:"w-7/10"})],-1)),t("tbody",null,[(l(!0),n(u,null,v(Object.entries(e.networkInterfaces),([a,i])=>(l(),n("tr",{key:a},[t("th",bt,r(a),1),t("td",gt,[(l(!0),n(u,null,v(i||[],(p,k)=>(l(),n(u,{key:k},[t("span",null,[c(r(p.address??"N/A")+" ",1),t("sup",yt,r(p.family??""),1)]),k<(i?.length??0)-1?(l(),n("br",mt)):b("",!0)],64))),128))])]))),128))])])])])):b("",!0)])):b("",!0):(l(),n("div",W,r(e.systemMonitorLabels.loadingData),1))])}const pt=j(J,[["render",ht],["__scopeId","data-v-f74cd8d5"]]);export{pt as default};
