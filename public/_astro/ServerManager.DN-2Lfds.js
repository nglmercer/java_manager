import{w as j}from"./runtime-dom.esm-bundler.8y5z4vCJ.js";import{u as P,S as H}from"./ServerList.BX9SUtlk.js";import{e as x}from"./Emitter.BIRpGEY5.js";/* empty css                                     */import{_ as K}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{d as q,c as i,a as e,e as A,t as l,n as T,F as J,r as Q,j as W,k as X,f as u,o as Y,h as Z,i as d}from"./runtime-core.esm-bundler.D2uX_WMQ.js";const $=q({__name:"ServerManager",setup(B,{expose:t}){const{servers:p,loading:r,error:S,activeServerId:f,activeServer:a,refreshServers:m,setActiveServer:y,startServer:h,stopServer:_,restartServer:w}=P(),E=u(null),c=u([]),b=u(!1),v=u(null),I=s=>{o("SELECTED",`Server "${s.name}" selected`)},V=(s,n)=>{o("MENU",`Context menu opened for "${s.name}"`)},F=s=>{v.value=s,b.value=!0,o("OPTIONS",`Options opened for "${s.name}"`)},O=s=>{o("GLOBAL_EVENT",`Global server selected: "${s.name}"`)},M=s=>{o("GLOBAL_EVENT",`Global server menu: "${s.server.name}"`)},C=s=>{o("GLOBAL_EVENT",`Global server options: "${s.name}"`)},o=(s,n)=>{console.log("addEventLog",s,n),c.value.push({timestamp:new Date().toLocaleTimeString(),type:s,message:n}),c.value.length>50&&(c.value=c.value.slice(-50))},L=async()=>{try{await m(),o("REFRESH","Servers refreshed successfully")}catch{o("ERROR","Failed to refresh servers")}},k=()=>{y(null),o("CLEAR","Selection cleared")},R=()=>{b.value=!1,v.value=null},G=async s=>{if(!v.value)return;const n=v.value;try{switch(s){case"start":await h(n.id);break;case"stop":await _(n.id);break;case"restart":await w(n.id);break}o("ACTION",`${s.toUpperCase()} command sent to "${n.name}"`)}catch{o("ERROR",`Failed to ${s} "${n.name}"`)}R()},z=s=>{switch(s){case"running":return"text-green-600";case"stopped":return"text-red-600";case"starting":return"text-yellow-600";default:return"text-gray-600"}},D=s=>{switch(s){case"SELECTED":return"text-blue-600";case"MENU":return"text-purple-600";case"OPTIONS":return"text-indigo-600";case"GLOBAL_EVENT":return"text-green-600";case"REFRESH":return"text-cyan-600";case"ACTION":return"text-orange-600";case"ERROR":return"text-red-600";default:return"text-gray-600"}},U=s=>{if(!s)return"0 B";const n=["B","KB","MB","GB","TB"],g=Math.floor(Math.log(s)/Math.log(1024));return`${(s/Math.pow(1024,g)).toFixed(2)} ${n[g]}`};Y(()=>{const s=x.on("server-selected",O),n=x.on("server-menu",M),g=x.on("server-options",C);o("INIT","Server Manager initialized"),Z(()=>{s(),n(),g()})}),t({servers:p,loading:r,error:S,activeServer:a,refreshServers:L,clearSelection:k,eventLog:c,serverListRef:E});const N={servers:p,loading:r,error:S,activeServerId:f,activeServer:a,apiRefreshServers:m,setActiveServer:y,startServer:h,stopServer:_,restartServer:w,serverListRef:E,eventLog:c,showOptionsModal:b,selectedServerForOptions:v,handleServerSelected:I,handleServerMenu:V,handleServerOptions:F,onServerSelected:O,onServerMenu:M,onServerOptions:C,addEventLog:o,refreshServers:L,clearSelection:k,closeOptionsModal:R,performServerAction:G,getStatusColor:z,getEventColor:D,formatSize:U,ServerList:H};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}}),ee={class:"server-manager p-6 bg-gray-50 min-h-screen"},te={class:"max-w-4xl mx-auto"},re={class:"mb-6 flex gap-4"},se=["disabled"],oe=["disabled"],ne={key:0,class:"mb-6 p-4 bg-white rounded-lg shadow border-l-4 border-blue-500"},ae={class:"grid grid-cols-2 gap-4 text-sm"},le={class:"ml-2 text-gray-900"},ie={class:"ml-2 text-gray-900"},de={class:"ml-2 text-gray-900"},ce={class:"mb-6"},ve={class:"bg-white rounded-lg shadow max-h-40 overflow-y-auto"},ge={key:0,class:"p-4 text-gray-500 text-center"},me={key:1,class:"divide-y divide-gray-200"},ue={class:"text-gray-500"},pe={class:"ml-2 text-gray-700"},Se={class:"bg-white rounded-lg shadow"},be={class:"p-4"},xe={class:"text-gray-600 mb-4"},fe={class:"flex gap-2"};function ye(B,t,p,r,S,f){return d(),i("div",ee,[e("div",te,[t[13]||(t[13]=e("div",{class:"mb-6"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Server Manager"),e("p",{class:"text-gray-600"},"Manage your Minecraft servers with Vue components")],-1)),e("div",re,[e("button",{onClick:r.refreshServers,disabled:r.loading,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 transition-colors"},l(r.loading?"Loading...":"Refresh Servers"),9,se),e("button",{onClick:r.clearSelection,disabled:!r.activeServerId,class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 disabled:opacity-50 transition-colors"}," Clear Selection ",8,oe)]),r.activeServer?(d(),i("div",ne,[t[8]||(t[8]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Active Server",-1)),e("div",ae,[e("div",null,[t[4]||(t[4]=e("span",{class:"font-medium text-gray-700"},"Name:",-1)),e("span",le,l(r.activeServer.name),1)]),e("div",null,[t[5]||(t[5]=e("span",{class:"font-medium text-gray-700"},"Status:",-1)),e("span",{class:T(["ml-2",r.getStatusColor(r.activeServer.status)])},l(r.activeServer.status),3)]),e("div",null,[t[6]||(t[6]=e("span",{class:"font-medium text-gray-700"},"Version:",-1)),e("span",ie,l(r.activeServer.version),1)]),e("div",null,[t[7]||(t[7]=e("span",{class:"font-medium text-gray-700"},"Size:",-1)),e("span",de,l(r.formatSize(r.activeServer.size)),1)])])])):A("",!0),e("div",ce,[t[9]||(t[9]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-3"},"Event Log",-1)),e("div",ve,[r.eventLog.length===0?(d(),i("div",ge," No events yet. Interact with servers to see events here. ")):(d(),i("div",me,[(d(!0),i(J,null,Q(r.eventLog.slice().reverse(),(a,m)=>(d(),i("div",{key:m,class:"p-3 text-sm"},[e("span",ue,l(a.timestamp),1),e("span",{class:T(["ml-2 font-medium",r.getEventColor(a.type)])},l(a.type),3),e("span",pe,l(a.message),1)]))),128))]))])]),e("div",Se,[t[10]||(t[10]=e("div",{class:"p-4 border-b border-gray-200"},[e("h2",{class:"text-xl font-semibold text-gray-900"},"Servers")],-1)),e("div",be,[W(r.ServerList,{ref:"serverListRef",onServerSelected:r.handleServerSelected,onServerMenu:r.handleServerMenu,onServerOptions:r.handleServerOptions},null,512)])]),r.showOptionsModal?(d(),i("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:r.closeOptionsModal},[e("div",{class:"bg-white rounded-lg p-6 max-w-md w-full mx-4",onClick:t[3]||(t[3]=j(()=>{},["stop"]))},[t[12]||(t[12]=e("h3",{class:"text-lg font-semibold mb-4"},"Server Options",-1)),e("p",xe,[t[11]||(t[11]=X(" Options for: ",-1)),e("strong",null,l(r.selectedServerForOptions?.name),1)]),e("div",fe,[e("button",{onClick:t[0]||(t[0]=a=>r.performServerAction("start")),class:"px-3 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition-colors"}," Start "),e("button",{onClick:t[1]||(t[1]=a=>r.performServerAction("stop")),class:"px-3 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors"}," Stop "),e("button",{onClick:t[2]||(t[2]=a=>r.performServerAction("restart")),class:"px-3 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600 transition-colors"}," Restart ")]),e("button",{onClick:r.closeOptionsModal,class:"mt-4 w-full px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition-colors"}," Close ")])])):A("",!0)])])}const Ce=K($,[["render",ye],["__scopeId","data-v-cf61cab2"]]);export{Ce as default};
